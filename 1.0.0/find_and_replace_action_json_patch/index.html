
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Project documentation for Archipelago." name="description"/>
<meta content="The Digital Services Team at Metropolitan New York Library Council" name="author"/>
<link href="https://docs.archipelago.nyc/1.0.0/find_and_replace_action_json_patch/" rel="canonical"/>
<link href="../find_and_replace_action_webform/" rel="prev"/>
<link href="../strawberryfield-formatters/" rel="next"/>
<link href="../images/strawberries_color.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.4" name="generator"/>
<title>Using the JSON Patch Metadata for Archipelago Digital Objects VBO action - Archipelago Documentation</title>
<link href="../assets/stylesheets/main.9c788c91.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#json-patch-find-and-replace">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Archipelago Documentation" class="md-header__button md-logo" data-md-component="logo" href=".." title="Archipelago Documentation">
<img alt="logo" src="../images/strawberries_color.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Archipelago Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Using the JSON Patch Metadata for Archipelago Digital Objects VBO action
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/esmero/archipelago-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    archipelago-documentation
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Archipelago Documentation" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Archipelago Documentation">
<img alt="logo" src="../images/strawberries_color.png"/>
</a>
    Archipelago Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/esmero/archipelago-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    archipelago-documentation
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_2" tabindex="0">
          About Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="About Archipelago" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          About Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ourtake/">
        Archipelago's Philosophy &amp; Guiding Principles
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../strawberryfields/">
        Strawberryfields Forever
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadatainarchipelago/">
        Metadata in Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archifilepersistencestrategy/">
        Archipelago's File Persistence Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../devops/">
        Software Services
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CODE_OF_CONDUCT/">
        Code of Conduct
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_4" tabindex="0">
          Instructions and Guides
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Instructions and Guides" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Instructions and Guides
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" id="__nav_4_1" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_1" tabindex="0">
          DevOps &amp; Deployment
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="DevOps &amp; Deployment" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
          DevOps &amp; Deployment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_1" id="__nav_4_1_1" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_1_1" tabindex="0">
          Archipelago-Deployment
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago-Deployment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_1">
<span class="md-nav__icon md-icon"></span>
          Archipelago-Deployment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-readme/">
        Start
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-osx/">
        Installing Archipelago Drupal 9 on OSX (macOS)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-ubuntu/">
        Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-windows/">
        Installing Archipelago Drupal 9 on Windows 10/11
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-democontent/">
        Adding Demo Archipelago Digital Objects (ADOs) to your Repository
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-upgradeFromD8ToD9/">
        Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-upgradeFromRC3/">
        Upgrading from 1.0.0-RC3 to 1.0.0
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sslsetup/">
        How to Set Up SSL for Docker/Archipelago
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_2" id="__nav_4_1_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_1_2" tabindex="0">
          Archipelago-Deployment-Live
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago-Deployment-Live" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_2">
<span class="md-nav__icon md-icon"></span>
          Archipelago-Deployment-Live
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-readme/">
        Start
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-gitworkflow/">
        Github Workflow
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-moveToLive/">
        Moving from archipelago-deployment to archipelago-deployment-live
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-upgradeFromD8ToD9/">
        Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-upgradeFromRC3/">
        Upgrading from 1.0.0-RC3 to 1.0.0
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-updatingContainers/">
        Updating Docker Containers
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utility_scripts/">
        Utility Scripts
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_4" id="__nav_4_1_4" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_1_4" tabindex="0">
          DevOps Q&amp;A
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="DevOps Q&amp;A" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_4">
<span class="md-nav__icon md-icon"></span>
          DevOps Q&amp;A
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../xdebug/">
        Debugging PHP in Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_minio_logging/">
        Min.io Logging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_smtp_configuration/">
        SMTP Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_twig_modules_configuration/">
        Twig Modules Configuration
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_4_2" tabindex="0">
          Archipelago 101
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago 101" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Archipelago 101
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../firstobject/">
        Ingesting Your First Object
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_2" id="__nav_4_2_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_2_2" tabindex="0">
          Webforms in Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Webforms in Archipelago" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_2">
<span class="md-nav__icon md-icon"></span>
          Webforms in Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../webforms/">
        Webforms
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../webformsasinput/">
        How to Create a Webform as an Input Method for Archipelago Digital Objects (ADO)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../modifyingfileextensionsinwebform/">
        Customizing Webforms (Modifying allowable file extensions)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../customwebformelements/">
        Archipelago Custom Webform Elements
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadata_display_preview/">
        Metadata Display Preview
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_4" id="__nav_4_2_4" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_2_4" tabindex="0">
          Twig Templates and Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Twig Templates and Archipelago" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_4">
<span class="md-nav__icon md-icon"></span>
          Twig Templates and Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../metadatatwigs/">
        Twig Templates and Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../workingtwigs/">
        Working With Twig in Archipelago (getting started with custom Twig templates)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../twig_recipe_cards/">
        Twig Recipe Cards for Common Use Cases
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_5" id="__nav_4_2_5" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_2_5" tabindex="0">
          Archipelago Multi-Importer (AMI)
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago Multi-Importer (AMI)" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_5">
<span class="md-nav__icon md-icon"></span>
          Archipelago Multi-Importer (AMI)
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_index/">
        Archipelago Multi-Importer (AMI)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_spreadsheet_overview/">
        Spreadsheet Formatting Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../googleapi/">
        Configuration for Google Sheets API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../AMIviaSpreadsheets/">
        Ingesting New Digital Objects and Collections using Spreadsheets or Google Sheets
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_lod_rec/">
        Linked Data Reconciliation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../I7solrImporter/">
        Using the Islandora 7 Solr Importer
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../annotations/">
        Annotations
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_7" id="__nav_4_2_7" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_4_2_7" tabindex="0">
          Find and Replace
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Find and Replace" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_7">
<span class="md-nav__icon md-icon"></span>
          Find and Replace
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../find_and_replace/">
        Advanced Batch Find and Replace
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../find_and_replace_action_text/">
        Text Based Find and Replace
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../find_and_replace_action_webform/">
        Webform Find and Replace
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          JSON Patch Find and Replace
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        JSON Patch Find and Replace
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-json-patch-and-when-to-use-it">
    What is a JSON Patch and when to use it?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#add">
    add
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#remove">
    remove
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#replace">
    replace
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#move">
    move
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy">
    copy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test">
    test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-select-the-ados-to-be-modified">
    Step 1: Select the ADOs to be Modified
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-json-patch-metadata-for-archipelago-digital-objects-action-configuration">
    Step 2: JSON Patch Metadata for Archipelago Digital Objects Action Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-run-the-json-patch-action-in-simulation-mode">
    Step 3: Run the JSON Patch Action in simulation mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-run-the-json-patch-action-but-for-real">
    Step 4: Run the JSON Patch Action but for real!
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_3" tabindex="0">
          Site Administration &amp; Configuration
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Site Administration &amp; Configuration" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Site Administration &amp; Configuration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../strawberryfield-formatters/">
        Strawberryfield Formatters
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../createdisplaymodes/">
        Creating Display Modes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archifilepersistencestrategy/">
        Archipelago's File Persistence Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../strawberry_key_name_providers/">
        Strawberry Key Name Providers
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" id="__nav_4_4" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_4" tabindex="0">
          General Q&amp;A
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="General Q&amp;A" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
          General Q&amp;A
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_index/">
        General Q&amp;A
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tbd/">
        Coming soon
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" id="__nav_4_5" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_5" tabindex="0">
          Contributing
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Contributing" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../giveortake/">
        Archipelago Contribution Guide
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5_2" id="__nav_4_5_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_5_2" tabindex="0">
          Documentation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Documentation" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_5_2">
<span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_about/">
        About This Documentation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_template/">
        Documentation Template
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_features/">
        Additional Features
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_technical/">
        Technical Details
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_5" tabindex="0">
          Additional Resources
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Additional Resources" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Additional Resources
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../presentations_events/">
        Archipelago Presentations &amp; Events
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../inthewild/">
        Archipelagos in the Wild
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../acknowledgments/">
        Care &amp; Coding + Fixing / Acknowledgments / License
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-json-patch-and-when-to-use-it">
    What is a JSON Patch and when to use it?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#add">
    add
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#remove">
    remove
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#replace">
    replace
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#move">
    move
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy">
    copy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test">
    test
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-select-the-ados-to-be-modified">
    Step 1: Select the ADOs to be Modified
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-json-patch-metadata-for-archipelago-digital-objects-action-configuration">
    Step 2: JSON Patch Metadata for Archipelago Digital Objects Action Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-run-the-json-patch-action-in-simulation-mode">
    Step 3: Run the JSON Patch Action in simulation mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-run-the-json-patch-action-but-for-real">
    Step 4: Run the JSON Patch Action but for real!
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<nav class="md-tags">
<span class="md-tag">Advanced Batch Find and Replace</span>
<span class="md-tag">JSON Patch Find and Replace</span>
<span class="md-tag">Search and Replace</span>
<span class="md-tag">JSON Patch</span>
<span class="md-tag">JSON Pointer</span>
</nav>
<h1 id="json-patch-find-and-replace">JSON Patch Find and Replace</h1>
<p>Enables you to carry out advanced <a href="https://jsonpatch.com">JSON Patch</a> operations within your metadata.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the main <a href="../find_and_replace/">Find and Replace documentation page</a> for a general overview of <a href="../find_and_replace/#where-to-find">where to find within your Archipelago</a>, a <a href="../find_and_replace/#main-page-overview">general overview of default options</a> and <a href="../find_and_replace/#important-notes--workflow-recommendations">important notes and workflow recommendations</a>.</p>
</div>
<h2 id="what-is-a-json-patch-and-when-to-use-it">What is a JSON Patch and when to use it?</h2>
<p>Before we dive into the mechanics of doing JSON Patching Batch in Archipelago we need to learn what a <strong>JSON Patch</strong> is and of course when applying this action is useful, possible (or not).</p>
<p>A JSON Patch is a <code>JSON</code> Document containing precise operations that can heavily modify the structure and values of an existing JSON Document, in this case the RAW JSON found inside a strawberryfield of our ADOs. </p>
<p>The operations available for modifications of an JSON document are:</p>
<ul>
<li>“add”</li>
<li>“remove”</li>
<li>“replace”,</li>
<li>“move”</li>
<li>“copy”</li>
</ul>
<p>And there is also one (very important) used to check/validate the existence of values/keys:</p>
<ul>
<li>“test”</li>
</ul>
<p>Even if you can have multiple operations in a single JSON Patch Document, they are always applied as a whole. Means if any of those fail nothing will be applied and in concrete, in our VBO action, no change will be done to your ADO. This in combination with the “test” operation gives you a lot of safety and a way of discerning/skipping completely a complex set of operations on e.g. a failed ”test”.</p>
<p>JSON Patch uses <code>JSON Pointers</code> as arguments in all of these operations to target a specific key/value of your JSON.</p>
<p>Using the following JSON Snippet as example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">"subject_lcgft_terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/genreForms\/gf2017027249"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographs"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>These JSON Pointers will resolve in the following manner:</p>
<ul>
<li><code>/subject_lcgft_terms</code> </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/genreForms\/gf2017027249"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographs"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<ul>
<li><code>/subject_lcgft_terms/0</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/genreForms\/gf2017027249"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographs"</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><code>/subject_lcgft_terms/0/label</code></li>
</ul>
<div class="highlight"><pre><span></span><code>Photographs
</code></pre></div>
<p>AS you can see a JSON Pointer is very precise , allowing you to target complete structures and values but it <em>does not allow</em> Wildcard Operations. Means you can not "search" or do loosy comparissons. This very fact limits many times the use case. E.g. if you have a list of terms like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">"term1"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"term2"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"term3"</span>
<span class="p">]</span>
</code></pre></div>
<p>and you want to "test" for the existence of <code>"term3"</code> before applying a change, you would need to know exactly at what position inside the <code>terms Array</code> (Starting from 0) it will/should be found. And that might not be consistent across every ADO. </p>
<p>So how do we use these pointers in an operation inside a JSON Patch document? Using the same fake "terms" JSON snippet the previously listed, operations are written like this:</p>
<h2 id="add">add</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms/0"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"term_another"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>This will add before the first term (in this case "term1" ) "term_another" as a value.</p>
<details class="info">
<summary>At the end</summary>
<p>you can use a dash (<code>-</code>) (e.g. "/terms/-") instead of the numeric position of an array entry to denote that the "value" needs to be added at the end. This is needed specially for empty lists. You can not target <code>0</code> position on an empty array.</p>
</details>
<h2 id="remove">remove</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"remove"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms/1"</span><span class="p">}</span>
</code></pre></div>
<p>This will remove the second term (in this case "term2" )</p>
<h2 id="replace">replace</h2>
<p><div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"replace"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms/1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"term_again"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
This will remove the second term (in this case "term2" ) and put in its place "term_again" as a value. Basically two operationes, “remove“ and “add “ in a single step</p>
<h2 id="move">move</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"move"</span><span class="p">,</span><span class="w"> </span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms_somewhere_else"</span><span class="p">}</span>
</code></pre></div>
<p>This will copy all values inside top JSON key <code>terms</code> into a new top JSON key named <code>terms_somewhere_else</code> and remove then the old <code>terms</code> key.</p>
<h2 id="copy">copy</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms_somewhere_else"</span><span class="p">}</span>
</code></pre></div>
<p>Similar to “move“, it will copy values inside top JSON key <code>terms</code> into a new top JSON key named <code>terms_somewhere_else</code> without removing then the old <code>terms</code> key or its content!</p>
<h2 id="test">test</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/terms/0"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"term1"</span><span class="p">}</span>
</code></pre></div>
<p>Finally, “test“ will check if on position <code>0</code> of terms there is a value of "term1". If not, the test will fail. If a single test fails the whole JSON Patch will be cancelled. Tests can not be concatenated via OR bolean operators. So they always act individually. Two tests with one failing is a failed JSON Patch.</p>
<p>There is more of course! The Complete documentation can be found <a href="https://jsonpatch.com">here</a></p>
<p>So. When to use JSON Patch? There are a few general rules/suggestions:</p>
<ul>
<li>When you can generate one or more precise “test“ operations. If you need to test against data that might exists but its position is not clear, a single JSON Patch will not do the trick. That said you could run the same JSON Patch document against the same set of ADOs more than once modifying slightly the “test“ to cover all variations (check for value at positition <code>0</code>, then again at position <code>1</code>, etc)</li>
<li>When you need to use data that is already inside the JSON Document and move it around. Sometimes <code>fixing</code> a value, in the sense of putting a static replacement, is not what you need. Other <code>Actions</code> <a href="../find_and_replace/">documented</a> will allow you to replace one value with another fixed one. But JSON Patch will allow you to use existing data inside your target JSON and move it/copy it.</li>
<li>When you operate on multiple JSON Keys and can target / match complete values. You can not replace a single word inside a value via a JSON Patch. But you can apply multiple precise operations in a single pass.</li>
<li>When you need to change data types. e.g. convert a single value into an array.</li>
<li>When you need safety. The fact that a single failed “test“ will cancel a whole JSON Patch allows you to operate with safety and ensure the final destination will always be a JSON</li>
</ul>
<p>Now that we know what it is and when we should do it, we can make a small exercise. The goal:</p>
<ul>
<li>For all ADO's with json key with value <code>photograph</code> that are member of collection with Node ID <code>16</code><ul>
<li>convert the <code>description</code> key from a single value into an array.</li>
<li>add an extra LOD entry</li>
<li>Copy a Value into a new Key</li>
</ul>
</li>
</ul>
<h2 id="step-1-select-the-ados-to-be-modified">Step 1: Select the ADOs to be Modified</h2>
<p>As with every other VBO action described in our documentation, start by selecting the ADOs you want to modify using the exposed Search Field(s) and/or Facets present in the Search and Replace <code>View</code> found at <code>/search-and-replace</code> . </p>
<p>Once you have filtered down the list to manageable size, containing at least the ADOs you plan on modifying (but for JSON Patch operation could be more too because you can “test“ and match ), press either on <code>Select / deselect all results in this view</code> to pass all the result (this includes all pages, not only the currently visible one) or go selectively one by one by checking on the <code>toggle</code> found beside each ADO's title. You will see how the number in <code>Selected 0 item in this view</code> increases. Now press <code>Apply to select Items</code>. We will use for this example <code>Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?]</code>, an ADO we provide in our DEMO sets. </p>
<p>Redundant to say, Batch Actions are intended to be used when a modification needs to be applied to more than one item, implying there is a pattern. For single ADOs you can always do this faster directly via the <strong>EDIT</strong> tab.</p>
<details class="note">
<summary>Keep your JSON Patches (and friends) around</summary>
<p>Since JSON Patching involves writing a, sometimes complex, JSON Document, please keep around an Application (or Text File) where you can copy/paste and save your JSON Patches for resuse or future references. Archipelago will not store nor remember between runs the JSON Patch document you submitted. It is also very useful to copy and have at hand the <code>RAW JSON</code> of one of the ADOs you plan to modify as a reference/aid while building the given JSON Patch document.</p>
</details>
<p>`</p>
<h2 id="step-2-json-patch-metadata-for-archipelago-digital-objects-action-configuration">Step 2: JSON Patch Metadata for Archipelago Digital Objects Action Configuration</h2>
<p>The default config JSON Patch form will contain an example JSON Patch set of Commands (Document)</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../images/json_patch_config_default.jpg"><img alt="Default JSON Patch Command" src="../images/json_patch_config_default.jpg"/></a></p>
<p>We are going to replace this one with a valid JSON document. Notice that it does not require a root <code>{}</code> Object wrapper and it is really a list (or array) of operations. </p>
<p>A bit of repetition but needed to explain the JSON Patch document. You can see on the following Note box how we copyed the RAW JSON of one ADO to be Patched to have a reference while building the JSON PATCH. for the sake of brevity we remove here the longer Image File technical Metadata.</p>
<details class="info">
<summary>RAW JSON of <code>Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?]</code></summary>
<div class="highlight"><span class="filename">Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?] | before Patching</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photograph"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"viaf"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?]"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"model"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New-York Historical Society, 170 Central Park West, New York, NY 10024, 212-873-3400."</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"audios"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mi">26</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"rights"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This digital image may be used for educational or scholarly purposes without restriction. Commercial and other uses of the item are prohibited without prior written permission from the New-York Historical Society. For more information, please visit the New-York Historical Society's Rights and Reproductions Department web page at [http:\/\/www.nyhistory.org\/about\/rights-reproductions](http:\/\/www.nyhistory.org\/about\/rights-reproductions)."</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"videos"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ap:tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"ap:sortfiles"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ispartof"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"English"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"edm_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ismemberof"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mi">16</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"creator_lod"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"name_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"role_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/vocabulary\/relators\/pht"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"agent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"personal"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"name_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stonebridge, George Ehler"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"role_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographer"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"George Ehler Stonebridge (d. 1941) was an amateur photographer who lived and worked in the Bronx, New York. He left little record of himself, but an invaluable one of his surroundings and interests. Stonebridge lived at several locations in the Bronx with his wife Bella, and their three children Grace, George, and William. He worked at the Northern Gaslight Company, although the position he held is unknown. In addition to taking photographs, Stonebridge wrote poetry and prose about his love of the Bronx, his children, and in honor of military victories. Some of Stonebridge's photographs appeared in local papers. In 1898, he was an authorized reporter and photographer for the North Side News; in 1905 he was an authorized reporter for the Bronx Borough Record and Times, and probably took photographs for that paper as well. Stonebridge was fascinated with the subject of military preparedness. Training rituals and staged battles were one of his favorite photographic subjects. His 1898 poem, \"Remember the Maine,\" celebrates the United States' victory in the Spanish-American War. He was especially proud of soldiers from the Bronx, and photographed historical tablets throughout the Borough commemorating previous military victories. Stonebridge also used his photographs to illustrate lectures. In 1907, he gave several lectures on \"The Training of War,\" using colored lantern slides."</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"interviewee"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"interviewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"pubmed_mesh"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_loc"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/subjects\/sh85038796"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dogs"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"website_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"as:generator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/localhost:8001\/form\/descriptive-metadata"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"descriptive_metadata"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Service"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"endTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-12-05T09:19:37-05:00"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Generator"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:\/\/www.w3.org\/ns\/activitystreams"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1910-01-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"issue_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_published"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subjects_local"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"term_aat_getty"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ap:entitymapping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"entity:file"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">"model"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"audios"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"images"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"videos"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"documents"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"upload_associated_warcs"</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">"entity:node"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">"ispartof"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"ismemberof"</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"europeana_agents"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"europeana_places"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"local_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nyhs_PR066_6136"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_wikidata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/www.wikidata.org\/entity\/Q3381576"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black-and-white photography"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/www.wikidata.org\/entity\/Q60"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York City"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"date_created_edtf"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_created_free"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_embargo_lift"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"physical_location"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_note"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"rights_statements"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Copyright - Educational Use Permitted"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"europeana_concepts"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"geographic_location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.8466508"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8785937"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Bronx, Bronx County, New York, United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"county"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"osm_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9691916"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boundary"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"locality"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"osm_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"us"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Bronx, Bronx County, New York, United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"neighbourhood"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bronx County"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"state_district"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"note_publishinginfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcgft_terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/genreForms\/gf2017027249"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographs"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"upload_associated_warcs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"physical_description_extent"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_personal_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_corporate_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subjects_local_personal_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_location_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_geographic_names"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/names\/n81059724"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bronx (New York, N.Y.)"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/names\/n79007751"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York (N.Y.)"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"related_item_host_display_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_local_identifier"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_title_info_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_type_of_resource"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"physical_description_note_condition"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Based on our own plan:</strong></p>
<ol>
<li>Check first if of type <code>photograph</code> and <code>memberof</code> Node ID <code>16</code></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/type"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photograph"</span><span class="p">},</span>
<span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ismemberof"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">16</span><span class="p">]}</span>
</code></pre></div>
<p>Notice that to be really sure we also match the data type, an <code>array</code> with a single value <code>16</code> of type integer (makes sense since the Operation is also a JSON and will be evaluated in the same way as the source RAW JSON). This is a precise match. if the ADO belongs to multiple Collections it will fail of course.</p>
<ol>
<li>Now we are going to convert <code>description</code> key from a single value into an array.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[]},</span>
<span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"move"</span><span class="p">,</span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/description"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array/-"</span><span class="p">},</span>
<span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"move"</span><span class="p">,</span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/description"</span><span class="p">},</span>
</code></pre></div>
<p>This is a multi step operation. Given that JSON Patch can not "cast" types and depends on a given datatype to be present before, e.g. adding a new value to it, we use here a temporary key.
Notice that you can not “add“ or “move“ to e.g. the position <code>0</code> because the destination array is indeed empty (that will fail). But by using the <code>dash</code> you can command it to put it at the end, which on an empty list is also at the beginning (we are starting to understand this!). </p>
<ol>
<li>And the extra LOD entry for wikidata, in this case the Q Item for <a href="https://www.wikidata.org/wiki/Q1196071">collie</a> (type of herding dog)</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subject_wikidata/-"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.wikidata.org/wiki/Q1196071"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collie"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
<ol>
<li>Finally we are going to copy the <code>geographic_location.state</code> value and put it into <code>subjects_local</code>:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"remove"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local"</span><span class="p">},</span>
<span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[]},</span>
<span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/geographic_location/state"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local/-"</span><span class="p">}</span>
</code></pre></div>
<p>Why so many operations? Because initially <code>"subjects_local"</code> had a value of <code>null</code> and it is not suited to generate/add to it as a multivalued key because of that. So we need to remove it first, recreate it as an empty list and then we can copy. <strong>Pro Note:</strong> you could partially rewrite this as <code>replace</code> operation!</p>
<details class="info">
<summary>what if subjects_local has data?</summary>
<p>You will lose it! you can add a “test“ or move data instead of recreating. Many choices.</p>
</details>
<p>The final JSON Patch will look like this. Copy it into the Configuration JSON Patch commands form field: </p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/type"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photograph"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ismemberof"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">16</span><span class="p">]},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[]},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"move"</span><span class="p">,</span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/description"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array/-"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"move"</span><span class="p">,</span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/temp_description_array"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/description"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subject_wikidata/-"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.wikidata.org/wiki/Q1196071"</span><span class="p">,</span>
<span class="w">         </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collie"</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"remove"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[]},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/geographic_location/state"</span><span class="p">,</span><span class="w"> </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subjects_local/-"</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<details class="note">
<summary>The inverse process online</summary>
<p>Now that you know (or are starting to understand) the manual process you can also try this <a href="https://json-patch-builder-online.github.io">online tool</a> that allows you, based on a source and a destination JSON, generate the needed JSON Patch to mutate one JSON into the another. The logic might not be always what you need and most likely it will not take in account that you actually need to move values and will prefer to fix values to be added via an add operation</p>
</details>
<h2 id="step-3-run-the-json-patch-action-in-simulation-mode">Step 3: Run the JSON Patch Action in simulation mode</h2>
<p>Ready. Now <strong>check</strong> the "only simulate and debug affected JSON" checkbox. We want to see if we did well but not yet modify any ADOs. Press <code>Apply</code> button. You will get another confirmation screen. Press <code>Execute Action</code>.</p>
<p>It will run quick (on this example) and you will redirected back on the original Drupal Views of Step 1. If your source <code>ADO</code> is actually the one from our Demo Collection you might see a <code>diff</code>, something very similar to this:</p>
<div class="highlight"><span class="filename">Text based diff after a successfull Patch</span><pre><span></span><code>129d129 &lt; "description": "George Ehler Stonebridge (d. 1941) was an amateur photographer who lived and worked in the Bronx, New York. He left little record of himself, but an invaluable one of his surroundings and interests. Stonebridge lived at several locations in the Bronx with his wife Bella, and their three children Grace, George, and William. He worked at the Northern Gaslight Company, although the position he held is unknown. In addition to taking photographs, Stonebridge wrote poetry and prose about his love of the Bronx, his children, and in honor of military victories. Some of Stonebridge's photographs appeared in local papers. In 1898, he was an authorized reporter and photographer for the North Side News; in 1905 he was an authorized reporter for the Bronx Borough Record and Times, and probably took photographs for that paper as well. Stonebridge was fascinated with the subject of military preparedness. Training rituals and staged battles were one of his favorite photographic subjects. His 1898 poem, \"Remember the Maine,\" celebrates the United States' victory in the Spanish-American War. He was especially proud of soldiers from the Bronx, and photographed historical tablets throughout the Borough commemorating previous military victories. Stonebridge also used his photographs to illustrate lectures. In 1907, he gave several lectures on \"The Training of War,\" using colored lantern slides.", 155d154 &lt; "subjects_local": null, 182a180,183 &gt; }, &gt; { &gt; "uri": "https:\/\/www.wikidata.org\/wiki\/Q1196071", &gt; "label": "collie" 236c238,244 &lt; "physical_description_note_condition": null --- &gt; "physical_description_note_condition": null, &gt; "description": [ &gt; "George Ehler Stonebridge (d. 1941) was an amateur photographer who lived and worked in the Bronx, New York. He left little record of himself, but an invaluable one of his surroundings and interests. Stonebridge lived at several locations in the Bronx with his wife Bella, and their three children Grace, George, and William. He worked at the Northern Gaslight Company, although the position he held is unknown. In addition to taking photographs, Stonebridge wrote poetry and prose about his love of the Bronx, his children, and in honor of military victories. Some of Stonebridge's photographs appeared in local papers. In 1898, he was an authorized reporter and photographer for the North Side News; in 1905 he was an authorized reporter for the Bronx Borough Record and Times, and probably took photographs for that paper as well. Stonebridge was fascinated with the subject of military preparedness. Training rituals and staged battles were one of his favorite photographic subjects. His 1898 poem, \"Remember the Maine,\" celebrates the United States' victory in the Spanish-American War. He was especially proud of soldiers from the Bronx, and photographed historical tablets throughout the Borough commemorating previous military victories. Stonebridge also used his photographs to illustrate lectures. In 1907, he gave several lectures on \"The Training of War,\" using colored lantern slides." &gt; ], &gt; "subjects_local": [ &gt; "New York" &gt; ]
</code></pre></div>
<p>Which means your Patch would have been applied!</p>
<p>In case something went wrong, e.g. any of the operations did not match your source data, you will see a <code>WARNING</code> like this</p>
<div class="highlight"><pre><span></span><code>Patch could not be applied for Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?]
</code></pre></div>
<h2 id="step-4-run-the-json-patch-action-but-for-real">Step 4: Run the JSON Patch Action but for real!</h2>
<p>Now that actual patching. Repeat from Step 1 to Step 3 but keep "only simulate and debug affected JSON" <strong>unchecked</strong> and follow the steps again. You ADO will be modified and you will get almost no notifications except of an action completed notice (in soothing green). If you check Laddie's ADO RAW json (expand in the same resulting view) it will look now like this</p>
<div class="highlight"><span class="filename">Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?] JSON after patching</span><pre><span></span><code><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photograph"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"viaf"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Laddie the dog running in the garden, Bronx, N.Y., undated [c. 1910-1918?]"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"model"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New-York Historical Society, 170 Central Park West, New York, NY 10024, 212-873-3400."</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"audios"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mi">26</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"rights"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This digital image may be used for educational or scholarly purposes without restriction. Commercial and other uses of the item are prohibited without prior written permission from the New-York Historical Society. For more information, please visit the New-York Historical Society's Rights and Reproductions Department web page at [http:\/\/www.nyhistory.org\/about\/rights-reproductions](http:\/\/www.nyhistory.org\/about\/rights-reproductions)."</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"videos"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ap:tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"ap:sortfiles"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ispartof"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"English"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"edm_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ismemberof"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="mi">16</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"creator_lod"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"name_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"role_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/vocabulary\/relators\/pht"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"agent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"personal"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"name_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stonebridge, George Ehler"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"role_label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographer"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="hll"><span class="w">    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="hll"><span class="w">        </span><span class="s2">"George Ehler Stonebridge (d. 1941) was an amateur photographer who lived and worked in the Bronx, New York. He left little record of himself, but an invaluable one of his surroundings and interests. Stonebridge lived at several locations in the Bronx with his wife Bella, and their three children Grace, George, and William. He worked at the Northern Gaslight Company, although the position he held is unknown. In addition to taking photographs, Stonebridge wrote poetry and prose about his love of the Bronx, his children, and in honor of military victories. Some of Stonebridge's photographs appeared in local papers. In 1898, he was an authorized reporter and photographer for the North Side News; in 1905 he was an authorized reporter for the Bronx Borough Record and Times, and probably took photographs for that paper as well. Stonebridge was fascinated with the subject of military preparedness. Training rituals and staged battles were one of his favorite photographic subjects. His 1898 poem, \"Remember the Maine,\" celebrates the United States' victory in the Spanish-American War. He was especially proud of soldiers from the Bronx, and photographed historical tablets throughout the Borough commemorating previous military victories. Stonebridge also used his photographs to illustrate lectures. In 1907, he gave several lectures on \"The Training of War,\" using colored lantern slides."</span>
</span><span class="hll"><span class="w">    </span><span class="p">],</span>
</span><span class="w">    </span><span class="nt">"interviewee"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"interviewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"pubmed_mesh"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_loc"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/subjects\/sh85038796"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dogs"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"website_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"as:generator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/localhost:8001\/form\/descriptive-metadata"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"descriptive_metadata"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Service"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"endTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-12-05T09:19:37-05:00"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Generator"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:\/\/www.w3.org\/ns\/activitystreams"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1910-01-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"issue_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_published"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="hll"><span class="w">    </span><span class="nt">"subjects_local"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="hll"><span class="w">        </span><span class="s2">"New York"</span>
</span><span class="hll"><span class="w">    </span><span class="p">],</span>
</span><span class="w">    </span><span class="nt">"term_aat_getty"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ap:entitymapping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"entity:file"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">"model"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"audios"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"images"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"videos"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"documents"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"upload_associated_warcs"</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">"entity:node"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">"ispartof"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"ismemberof"</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"europeana_agents"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"europeana_places"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"local_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nyhs_PR066_6136"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_wikidata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/www.wikidata.org\/entity\/Q3381576"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black-and-white photography"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/www.wikidata.org\/entity\/Q60"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York City"</span>
<span class="w">        </span><span class="p">},</span>
<span class="hll"><span class="w">        </span><span class="p">{</span>
</span><span class="hll"><span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:\/\/www.wikidata.org\/wiki\/Q1196071"</span><span class="p">,</span>
</span><span class="hll"><span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collie"</span>
</span><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"date_created_edtf"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_created_free"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"date_embargo_lift"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"physical_location"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_note"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"rights_statements"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Copyright - Educational Use Permitted"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"europeana_concepts"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"geographic_location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.8466508"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8785937"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Bronx, Bronx County, New York, United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"county"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"osm_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9691916"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boundary"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"locality"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"osm_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"us"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Bronx, Bronx County, New York, United States"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"neighbourhood"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bronx County"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"state_district"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"note_publishinginfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcgft_terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/genreForms\/gf2017027249"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Photographs"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"upload_associated_warcs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">"physical_description_extent"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_personal_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_corporate_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subjects_local_personal_names"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_location_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"subject_lcnaf_geographic_names"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/names\/n81059724"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bronx (New York, N.Y.)"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/id.loc.gov\/authorities\/names\/n79007751"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York (N.Y.)"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"related_item_host_display_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_local_identifier"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_title_info_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"related_item_host_type_of_resource"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"physical_description_note_condition"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
<p>That is all. Again, keep your <strong>JSON Patches</strong> safe in a text document, test/try simple things first, look for <strong>patterns</strong>, look for <em>No-Nos</em> that can become "tests" to avoid touching ADOs that do not need to be updated and always remember that the destination type (single value, array or object) of an existing Key might affect your complex logic. Happy Patching!</p>
<hr/>
<p>Thank you for reading! Please contact us on our <a href="https://groups.google.com/forum/#!forum/archipelago-commons">Archipelago Commons Google Group</a> with any questions or feedback.</p>
<p>Return to the main <a href="https://github.com/esmero/archipelago-documentation/blob/1.0.0/docs/find_and_replace.md">Find and Replace documentation page</a> or the <a href="https://github.com/esmero/archipelago-documentation/blob/1.0.0/docs/index.md">Archipelago Documentation main page</a>.</p>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 14, 2022</span>
<br/>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 14, 2022</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/esmero" rel="noopener" target="_blank" title="Archipelago Commons + esmero">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="https://groups.google.com/g/archipelago-commons" rel="noopener" target="_blank" title="Archipelago Commons Google Group">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15 4v7H5.17L4 12.17V4h11m1-2H3a1 1 0 0 0-1 1v14l4-4h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m5 4h-2v9H6v2a1 1 0 0 0 1 1h11l4 4V7a1 1 0 0 0-1-1Z"></path></svg>
</a>
<a class="md-social__link" href="https://archipelagocommons.slack.com" rel="noopener" target="_blank" title="Archipelago Commons Slack Channel">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.top", "navigation.sections", "navigation.indexes", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "default", "provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.ba449ae6.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>
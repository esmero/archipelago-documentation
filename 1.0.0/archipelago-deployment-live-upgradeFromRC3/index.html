
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Project documentation for Archipelago." name="description"/>
<meta content="The Digital Services Team at Metropolitan New York Library Council" name="author"/>
<link href="https://docs.archipelago.nyc/1.0.0/archipelago-deployment-live-upgradeFromRC3/" rel="canonical"/>
<link href="../images/strawberries_color.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Archipelago-deployment-live: upgrading to 1.0.0 (1.0.0-RC3 to 1.0.0) - Archipelago Documentation</title>
<link href="../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#archipelago-deployment-live-upgrading-from-100-rc3-to-100">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Archipelago Documentation" class="md-header__button md-logo" data-md-component="logo" href=".." title="Archipelago Documentation">
<img alt="logo" src="../images/strawberries_color.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Archipelago Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Archipelago-deployment-live: upgrading to 1.0.0 (1.0.0-RC3 to 1.0.0)
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/esmero/archipelago-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    archipelago-documentation
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Archipelago Documentation" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Archipelago Documentation">
<img alt="logo" src="../images/strawberries_color.png"/>
</a>
    Archipelago Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/esmero/archipelago-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    archipelago-documentation
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          About Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="About Archipelago" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          About Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ourtake/">
        Archipelago's Philosophy &amp; Guiding Principles
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../strawberryfields/">
        Strawberryfields Forever
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadatainarchipelago/">
        Metadata in Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archifilepersistencestrategy/">
        Archipelago's File Persistence Strategy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../devops/">
        Software Services
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CODE_OF_CONDUCT/">
        Code of Conduct
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Instructions and Guides
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Instructions and Guides" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Instructions and Guides
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1">
          DevOps &amp; Deployment
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="DevOps &amp; Deployment" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
          DevOps &amp; Deployment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_1" id="__nav_4_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_1">
          Archipelago-Deployment
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago-Deployment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_1">
<span class="md-nav__icon md-icon"></span>
          Archipelago-Deployment
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-readme/">
        Start
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-osx/">
        Installing Archipelago Drupal 9 on OSX (macOS)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-ubuntu/">
        Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-windows/">
        Installing Archipelago Drupal 9 on Windows 10/11
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-democontent/">
        Adding Demo Archipelago Digital Objects (ADOs) to your Repository
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-upgradeFromD8ToD9/">
        Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-upgradeFromRC3/">
        Upgrading from 1.0.0-RC3 to 1.0.0
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sslsetup/">
        How to Set Up SSL for Docker/Archipelago
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_2" id="__nav_4_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_2">
          Archipelago-Deployment-Live
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago-Deployment-Live" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_2">
<span class="md-nav__icon md-icon"></span>
          Archipelago-Deployment-Live
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-readme/">
        Start
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-gitworkflow/">
        Github Workflow
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-moveToLive/">
        Moving from archipelago-deployment to archipelago-deployment-live
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-upgradeFromD8ToD9/">
        Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Upgrading from 1.0.0-RC3 to 1.0.0
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Upgrading from 1.0.0-RC3 to 1.0.0
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-this-documentation-for">
    What is this documentation for?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#requirements">
    Requirements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#backing-up-and-preparing-for-the-upgrade">
    Backing up and preparing for the upgrade
  </a>
<nav aria-label="Backing up and preparing for the upgrade" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1">
    Step 1:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2">
    Step 2:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3">
    Step 3:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4">
    Step 4:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-5">
    Step 5:
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#upgrading-to-100">
    Upgrading to 1.0.0
  </a>
<nav aria-label="Upgrading to 1.0.0" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1_1">
    Step 1:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2_1">
    Step 2:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3_1">
    Step 3:
  </a>
<nav aria-label="Step 3:" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-if-not-all-is-ok-and-i-see-red-and-a-lot-of-dependency-explanations">
    What if not all is OK and I see red and a lot of dependency explanations?
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4_1">
    Step 4:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-5_1">
    Step 5:
  </a>
<nav aria-label="Step 5:" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a-partial-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-not-remove-ones-that-only-exist-in-your-custom-setup-eg-new-webforms-or-view-modes">
    A Partial Sync, which will bring new configs and update existing ones but will not remove ones that only exist in your custom setup, e.g. new Webforms or View Modes.
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-complete-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-also-remove-all-the-ones-that-are-not-part-of-rc3-its-a-like-clean-factory-reset">
    A Complete Sync, which will bring new configs and update existing ones but will also remove all the ones that are not part of RC3. It's a like clean factory reset.
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-7-update-or-not-your-metadata-display-entities-and-menu-items">
    Step 7: Update (or not) your Metadata Display Entities and Menu items.
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archipelago-deployment-live-updatingContainers/">
        Updating Docker Containers
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utility_scripts/">
        Utility Scripts
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_4" id="__nav_4_1_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_4">
          DevOps Q&amp;A
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="DevOps Q&amp;A" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_4">
<span class="md-nav__icon md-icon"></span>
          DevOps Q&amp;A
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../xdebug/">
        Debugging PHP in Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_minio_logging/">
        Min.io Logging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_smtp_configuration/">
        SMTP Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_twig_modules_configuration/">
        Twig Modules Configuration
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Archipelago 101
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago 101" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Archipelago 101
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../firstobject/">
        Ingesting Your First Object
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_2" id="__nav_4_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_2">
          Webforms in Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Webforms in Archipelago" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_2">
<span class="md-nav__icon md-icon"></span>
          Webforms in Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../webforms/">
        Webforms
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../webformsasinput/">
        How to Create a Webform as an Input Method for Archipelago Digital Objects (ADO)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../modifyingfileextensionsinwebform/">
        Customizing Webforms (Modifying allowable file extensions)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../customwebformelements/">
        Archipelago Custom Webform Elements
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_3" id="__nav_4_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_3">
          Twig Templates and Archipelago
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Twig Templates and Archipelago" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_3">
<span class="md-nav__icon md-icon"></span>
          Twig Templates and Archipelago
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../metadatatwigs/">
        Twig Templates and Archipelago
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../workingtwigs/">
        Working With Twig in Archipelago (getting started with custom Twig templates)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_4" id="__nav_4_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_4">
          Archipelago Multi-Importer (AMI)
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Archipelago Multi-Importer (AMI)" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_4">
<span class="md-nav__icon md-icon"></span>
          Archipelago Multi-Importer (AMI)
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_index/">
        Archipelago Multi-Importer (AMI)
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2_4_2" id="__nav_4_2_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_4_2">
          AMI Instructions and Guides
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="AMI Instructions and Guides" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_2_4_2">
<span class="md-nav__icon md-icon"></span>
          AMI Instructions and Guides
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_spreadsheet_overview/">
        Spreadsheet Formatting Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../googleapi/">
        Configuration for Google Sheets API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../AMIviaSpreadsheets/">
        Ingesting New Digital Objects and Collections using Spreadsheets or Google Sheets
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ami_lod_rec/">
        Linked Data Reconciliation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../I7solrImporter/">
        Using the Islandora 7 Solr Importer
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../annotations/">
        Annotations
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3">
          Site Administration &amp; Configuration
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Site Administration &amp; Configuration" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Site Administration &amp; Configuration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../strawberryfield-formatters/">
        Strawberryfield Formatters
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../createdisplaymodes/">
        Creating Display Modes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../archifilepersistencestrategy/">
        Archipelago's File Persistence Strategy
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" id="__nav_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_4">
          General Q&amp;A
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="General Q&amp;A" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
          General Q&amp;A
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../generalqa_index/">
        General Q&amp;A
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tbd/">
        Coming soon
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5">
          Contributing
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Contributing" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../giveortake/">
        Archipelago Contribution Guide
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5_2" id="__nav_4_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5_2">
          Documentation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Documentation" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_5_2">
<span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_about/">
        About This Documentation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_template/">
        Documentation Template
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_features/">
        Additional Features
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../documentation_technical/">
        Technical Details
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          Additional Information
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Additional Information" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Additional Information
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../presentations_docs/">
        Archipelago Presentations and Documents
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../inthewild/">
        Archipelagos in the Wild
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../acknowledgments/">
        Care &amp; Coding + Fixing / Acknowledgments / License
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-this-documentation-for">
    What is this documentation for?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#requirements">
    Requirements
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#backing-up-and-preparing-for-the-upgrade">
    Backing up and preparing for the upgrade
  </a>
<nav aria-label="Backing up and preparing for the upgrade" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1">
    Step 1:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2">
    Step 2:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3">
    Step 3:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4">
    Step 4:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-5">
    Step 5:
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#upgrading-to-100">
    Upgrading to 1.0.0
  </a>
<nav aria-label="Upgrading to 1.0.0" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1_1">
    Step 1:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2_1">
    Step 2:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3_1">
    Step 3:
  </a>
<nav aria-label="Step 3:" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-if-not-all-is-ok-and-i-see-red-and-a-lot-of-dependency-explanations">
    What if not all is OK and I see red and a lot of dependency explanations?
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4_1">
    Step 4:
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-5_1">
    Step 5:
  </a>
<nav aria-label="Step 5:" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a-partial-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-not-remove-ones-that-only-exist-in-your-custom-setup-eg-new-webforms-or-view-modes">
    A Partial Sync, which will bring new configs and update existing ones but will not remove ones that only exist in your custom setup, e.g. new Webforms or View Modes.
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-complete-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-also-remove-all-the-ones-that-are-not-part-of-rc3-its-a-like-clean-factory-reset">
    A Complete Sync, which will bring new configs and update existing ones but will also remove all the ones that are not part of RC3. It's a like clean factory reset.
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-7-update-or-not-your-metadata-display-entities-and-menu-items">
    Step 7: Update (or not) your Metadata Display Entities and Menu items.
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<nav class="md-tags">
<span class="md-tag">Archipelago-deployment-live</span>
<span class="md-tag">Drupal 9</span>
</nav>
<a class="md-content__button md-icon" href="https://github.com/esmero/archipelago-documentation/commits/1.0.0/docs/archipelago-deployment-live-upgradeFromRC3.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="archipelago-deployment-live-upgrading-from-100-rc3-to-100">Archipelago-deployment-live: upgrading from 1.0.0-RC3 to 1.0.0</h1>
<h2 id="what-is-this-documentation-for">What is this documentation for?</h2>
<p>If you already have a well-set-up and well-loved Archipelago (RC3 or your own custom version) running Drupal 9, this documentation will allow you to update to 1.0.0 without major issues.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>An <a href="https://github.com/esmero/archipelago-deployment-live">archipelago-deployment-live</a> instance 1.0.0-RC3 (working, tested) deployed using provided instructions via Docker and running Drupal 9.</li>
<li>Basic knowledge and instincts (+ courage) on how to run Terminal Commands, <code>composer</code> and <code>drush</code>.</li>
<li>Patience. You can't skip steps here.</li>
<li>For Shell Commands documented here please copy line by line—not the whole block.</li>
</ul>
<h2 id="backing-up-and-preparing-for-the-upgrade">Backing up and preparing for the upgrade</h2>
<p>Backups are always going to be your best friends. Archipelago's code, database and settings are mostly self-contained in your current <code>archipelago-deployment-live</code> repo folder, and backing up is simple because of that.</p>
<h3 id="step-1">Step 1:</h3>
<p>Shut down your <code>docker-compose</code> ensemble. Move to your <code>archipelago-deployment-live</code> folder and run this:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> deploy/ec2-docker
docker-compose down
</code></pre></div>
<h3 id="step-2">Step 2:</h3>
<p>Verify that all containers are actually down. The following command should return an empty listing. If anything is still running, wait a little longer, and run the following comman again.</p>
<div class="highlight"><pre><span></span><code>docker ps
</code></pre></div>
<h3 id="step-3">Step 3:</h3>
<p>Now let's <code>tar.gz</code> the whole ensemble with data and configs. As an example we will save this into your <code>$HOME</code> folder.
As a good practice we append the <strong>current date </strong>(YEAR-MONTH-DAY) to the filename. Here we assume today is December 1st of 2021.</p>
<div class="highlight"><pre><span></span><code>sudo tar -czvpf <span class="nv">$HOME</span>/archipelago-deployment-live-backup-20220803.tar.gz ../../../archipelago-deployment-live
</code></pre></div>
<p>The process may take a few minutes. Now let's verify that all is there and that the <code>tar.gz</code> is not corrupt.</p>
<div class="highlight"><pre><span></span><code>tar -tvvf <span class="nv">$HOME</span>/archipelago-deployment-live-backup-20220803.tar.gz 
</code></pre></div>
<p>You will see a listing of files. If corrupt (Do you have enough space? Did your ssh connection drop?) you will see the following:</p>
<div class="highlight"><pre><span></span><code>tar: Unrecognized archive format
</code></pre></div>
<h3 id="step-4">Step 4:</h3>
<p>Restart your <code>docker-compose</code> ensemble, and wait a little while for all to start.</p>
<div class="highlight"><pre><span></span><code>docker-compose up -d
</code></pre></div>
<h3 id="step-5">Step 5:</h3>
<p>Export/backup all of your live Archipelago configurations (this allows you to compare/come back in case you lose something custom during the upgrade).</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> esmero-php mkdir config/backup
docker <span class="nb">exec</span> esmero-php drush cex --destination<span class="o">=</span>/var/www/html/config/backup
</code></pre></div>
<p>Good. Now it's safe to begin the upgrade.</p>
<hr/>
<h2 id="upgrading-to-100">Upgrading to 1.0.0</h2>
<h3 id="step-1_1">Step 1:</h3>
<p>First we are going to disable modules that are not part of 1.0.0 or are not yet compatible with Drupal 9.4.x or higher . Run the following command:</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> esmero-php drush pm-uninstall search_api_solr_defaults entity_reference
</code></pre></div>
<p>From inside your <code>archipelago-deployment-live</code> repo folder we are going to open up the file <code>permissions</code> for some of your most protected Drupal files.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> ../../
sudo chmod <span class="m">777</span> drupal/web/sites/default
sudo chmod <span class="m">666</span> drupal/web/sites/default/*settings.php
sudo chmod <span class="m">666</span> drupal/web/sites/default/*services.yml
</code></pre></div>
<h3 id="step-2_1">Step 2:</h3>
<p>First let's back up our current composer.lock:</p>
<div class="highlight"><pre><span></span><code>cp drupal/composer.lock drupal/composer.original.lock
</code></pre></div>
<p>Time to fetch the <code>1.0.0</code> branch and update our <code>docker-compose</code> and <code>composer</code> dependencies. We are also going to stop the current <code>docker</code> ensemble to update all containers to newer versions:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> deploy/ec2-docker
docker-compose down
git fetch
git checkout <span class="m">1</span>.0.0 
</code></pre></div>
<p>If you decide to enable the Drupal REDIS module, make sure to add the <code>REDIS_PASSWORD</code> variable to your <code>.env</code> file.</p>
<p><code>IMPORTANT NOTE</code>: For AWS EC2. If you selected an <code>IAM role</code> for your server when setting it up/deploying it, <code>min.io</code> will use the AWS EC2-backed internal API to request access to your S3. This means the ROLE itself needs to have read/write access (ACL) to the given Bucket(s) and your key/secrets won't be able to override that. Please do not ignore this note. It will save you a LOT of frustration and coffee. You can also run an EC2 instance without a given IAM and in that case just the ACCESS_KEY/SECRET will matter.</p>
<p>Now that you know, you also know that these values <strong>should not be shared</strong> and this <code>.env</code> file <strong>should not be committed/kept in version control</strong>. Please be careful.</p>
<p>Now let's back up the existing <code>docker-compose</code> file:</p>
<div class="highlight"><pre><span></span><code>cp docker-compose.yml docker-compose-original.yml
</code></pre></div>
<p>Then copy the appropriate <code>docker-compose</code> file for your architecture:</p>
<details class="info">
<summary>Linux/x86-64/AMD64</summary>
<div class="highlight"><pre><span></span><code>cp docker-compose-aws-s3.yml docker-compose.yml
</code></pre></div>
</details>
<details class="info">
<summary>Linux/ARM64/Apple Silicon (M1 and M2)</summary>
<div class="highlight"><pre><span></span><code>cp docker-compose-aws-s3-arm64.yml docker-compose.yml
</code></pre></div>
</details>
<!--repo_docs

___

Linux/x86-64/AMD64:

<div class="highlight"><pre><span></span><code>cp docker-compose-aws-s3.yml docker-compose.yml
</code></pre></div>

___

Linux/ARM64/Apple Silicon (M1 and M2):

<div class="highlight"><pre><span></span><code>cp docker-compose-aws-s3-arm64.yml docker-compose.yml
</code></pre></div>

___

repo_docs-->
<p>Next, let's review what's changed in case any customizations need to be brought into the new <code>docker-compose</code> configurations:</p>
<div class="highlight"><pre><span></span><code>git diff --no-index docker-compose-original.yml docker-compose.yml
</code></pre></div>
<p>You should encounter something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/docker-compose-original.yml b/docker-compose.yml</span><span class="w"></span>
<span class="gh">index 6f5b17e..282417f 100644</span><span class="w"></span>
<span class="gd">--- a/docker-compose-original.yml</span><span class="w"></span>
<span class="gi">+++ b/docker-compose.yml</span><span class="w"></span>
<span class="gu">@@ -1,5 +1,5 @@</span><span class="w"></span>
<span class="w"> </span># Run docker-compose up -d<span class="w"></span>
<span class="gd">-</span><span class="w"></span>
<span class="gi">+# Docker file for AMD64/X86 machines</span><span class="w"></span>
<span class="w"> </span>version: '3.5'<span class="w"></span>
<span class="w"> </span>services:<span class="w"></span>
<span class="w"> </span>  web:<span class="w"></span>
<span class="gu">@@ -23,6 +23,7 @@ services:</span><span class="w"></span>
<span class="w"> </span>      - solr<span class="w"></span>
<span class="w"> </span>      - php<span class="w"></span>
<span class="w"> </span>      - db<span class="w"></span>
<span class="gi">+      - redis</span><span class="w"></span>
<span class="w"> </span>    tty: true<span class="w"></span>
<span class="w"> </span>    networks:<span class="w"></span>
<span class="w"> </span>      - host-net<span class="w"></span>
<span class="gu">@@ -30,7 +31,7 @@ services:</span><span class="w"></span>
<span class="w"> </span>  php:<span class="w"></span>
<span class="w"> </span>    container_name: esmero-php<span class="w"></span>
<span class="w"> </span>    restart: always<span class="w"></span>
<span class="gd">-    image: "esmero/php-7.4-fpm:1.0.0-RC2-multiarch"</span><span class="w"></span>
<span class="gi">+    image: "esmero/php-8.0-fpm:1.1.0-multiarch"</span><span class="w"></span>
<span class="w"> </span>    tty: true<span class="w"></span>
<span class="w"> </span>    networks:<span class="w"></span>
<span class="w"> </span>      - host-net<span class="w"></span>
<span class="gu">@@ -44,10 +45,11 @@ services:</span><span class="w"></span>
<span class="w"> </span>      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}<span class="w"></span>
<span class="w"> </span>      MINIO_BUCKET_MEDIA: ${MINIO_BUCKET_MEDIA}<span class="w"></span>
<span class="w"> </span>      MINIO_FOLDER_PREFIX_MEDIA: ${MINIO_FOLDER_PREFIX_MEDIA}<span class="w"></span>
<span class="gi">+      REDIS_PASSWORD: ${REDIS_PASSWORD}</span><span class="w"></span>
<span class="w"> </span>  solr:<span class="w"></span>
<span class="w"> </span>    container_name: esmero-solr<span class="w"></span>
<span class="w"> </span>    restart: always<span class="w"></span>
<span class="gd">-    image: "solr:8.8.2"</span><span class="w"></span>
<span class="gi">+    image: "solr:8.11.2"</span><span class="w"></span>
</code></pre></div>
<p>As you can see, most of the changes in this example are for new images and a new service/container/environment variable (REDIS), but you may have custom settings for your containers. Review any differences carefully and make adjustments as needed.</p>
<p>Finally, pull the images:</p>
<div class="highlight"><pre><span></span><code>docker compose pull 
</code></pre></div>
<p>1.0.0 provides a new Cantaloupe that uses different permissions so we need to adapt those. From your current folder (../ec2-deploy) run:</p>
<div class="highlight"><pre><span></span><code>sudo chown <span class="m">8183</span>:8183 ../../config_storage/iiifconfig/cantaloupe.properties
sudo chown -R <span class="m">8183</span>:8183 ../../data_storage/iiifcache
sudo chown -R <span class="m">8183</span>:8183 ../../data_storage/iiiftmp
</code></pre></div>
<p>Time to start the ensemble again</p>
<div class="highlight"><pre><span></span><code>docker compose up -d
</code></pre></div>
<p>Give all a little time to start. <code>Solr</code> core and <code>Database</code> need to be upgraded, Cantaloupe is new and this brings also Redis for caching. Please be patient. To ensure all is well, run (more than once if necessary) the following:</p>
<div class="highlight"><pre><span></span><code>docker ps
</code></pre></div>
<p>You should see something like this: 
e.g if running on ARM64 You should see something like this: </p>
<div class="highlight"><pre><span></span><code>CONTAINER ID   IMAGE                                    COMMAND                  CREATED          STATUS          PORTS                                                           NAMES
4ed2f62e866e   jonasal/nginx-certbot                      <span class="s2">"/docker-entrypoint.…"</span> <span class="m">32</span> seconds ago   Up <span class="m">27</span> seconds   <span class="m">0</span>.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp, <span class="m">0</span>.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp   esmero-web
e6b4383039c3   minio/minio:RELEASE.2022-06-11T19-55-32Z   <span class="s2">"/usr/bin/docker-ent…"</span> <span class="m">33</span> seconds ago   Up <span class="m">30</span> seconds   <span class="m">0</span>.0.0.0:9000-9001-&gt;9000-9001/tcp, :::9000-9001-&gt;9000-9001/tcp              esmero-minio
f2b6b173b7e2   solr:8.11.2                                <span class="s2">"docker-entrypoint.s…"</span> <span class="m">33</span> seconds ago   Up <span class="m">28</span> seconds   <span class="m">0</span>.0.0.0:8983-&gt;8983/tcp, :::8983-&gt;8983/tcp                                  esmero-solr
a553bf484343   esmero/php-8.0-fpm:1.0.0-multiarch         <span class="s2">"docker-php-entrypoi…"</span> <span class="m">33</span> seconds ago   Up <span class="m">30</span> seconds   <span class="m">9000</span>/tcp                                                                   esmero-php
ecb47349ae94   esmero/esmero-nlp:fasttext-multiarch       <span class="s2">"/usr/local/bin/entr…"</span> <span class="m">33</span> seconds ago   Up <span class="m">30</span> second    <span class="m">0</span>.0.0.0:6400-&gt;6400/tcp, :::6400-&gt;6400/tcp                                  esmero-nlp
61272dce034a   redis:6.2-alpine                           <span class="s2">"docker-entrypoint.s…"</span> <span class="m">33</span> seconds ago   Up <span class="m">28</span> seconds                                                                              esmero-redis
0ee9869f809b   esmero/cantaloupe-s3:6.0.0-multiarch       <span class="s2">"sh -c 'java -Dcanta…"</span> <span class="m">33</span> seconds ago   Up <span class="m">28</span> seconds   <span class="m">0</span>.0.0.0:8183-&gt;8182/tcp, :::8183-&gt;8182/tcp                                  esmero-cantaloupe
131d072567ce   mariadb:10.6.8-focal                       <span class="s2">"docker-entrypoint.s…"</span> <span class="m">33</span> seconds ago   Up <span class="m">28</span> seconds   <span class="m">3306</span>/tcp                                                                   esmero-db                                            esmero-php
</code></pre></div>
<p>Important here is the <code>STATUS</code> column. It <strong>needs</strong> to be a number that goes up in time every time you run <code>docker ps</code> again (and again).</p>
<h3 id="step-3_1">Step 3:</h3>
<p>Instead of using the provided <code>composer.default.lock</code> out of the box we are going to loosen certain dependencies and bring manually Archipelago modules, all this to make update easier and future upgrades less of a pain.</p>
<p>First, as a sanity check let's make sure nothing happened to our original <code>composer.lock</code> fileby doing a diff against our backed up file:</p>
<div class="highlight"><pre><span></span><code>git diff --no-index ../../drupal/composer.original.lock ../../drupal/composer.lock
</code></pre></div>
<p>If all is ok, there should be no output. If there's any output, copy your backed up file back to default:</p>
<div class="highlight"><pre><span></span><code>cp ../../drupal/composer.original.lock ../../drupal/composer.lock
</code></pre></div>
<p>Finally, we bring over the modules:</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/core:^9 drupal/core-composer-scaffold:^9 drupal/core-project-message:^9 drupal/core-recommended:^9"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/core-dev:^9 --dev"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/tokenuuid:^2"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require 'drupal/facets:^2.0'"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/moderated_content_bulk_publish:^2"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/queue_ui:^3.1"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require drupal/jquery_ui_touch_punch:^1.1"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require archipelago/ami:0.4.0.x-dev strawberryfield/format_strawberryfield:1.0.0.x-dev strawberryfield/strawberryfield:1.0.0.x-dev strawberryfield/strawberry_runners:0.4.0.x-dev strawberryfield/webform_strawberryfield:1.0.0.x-dev drupal/views_bulk_operations:^4.1"</span>
</code></pre></div>
<p>Now we are going to tell <code>composer</code> to actually fetch the new code and dependencies using <code>composer.lock</code> and update the whole Drupal/PHP/JS environment.</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer update -W"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"drush cr"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"drush en jquery_ui_touch_punch"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"drush updatedb"</span>
</code></pre></div>
<p>Well done! If you see <strong>no</strong> issues and all ends in a <strong>Green colored message</strong> all is good! <a href="#step-4_1">Jump to Step 4</a></p>
<h4 id="what-if-not-all-is-ok-and-i-see-red-and-a-lot-of-dependency-explanations">What if not all is OK and I see red and a lot of dependency explanations?</h4>
<p>If you have manually installed packages via composer in the past that are NO longer Drupal 9 compatible you may see errors. 
In that case you need to check each package website's (normally https://www.drupal.org/project/the_module_name) and check if there is a Drupal 9 compatible version. </p>
<p>If so run:</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer require 'drupal/the_module_name:^VERSION_NUMBER_THAT_WORKS_ON_DRUPAL9_' --update-with-dependencies --no-update"</span> and run **Step <span class="m">3</span> ** again <span class="o">(</span>and again <span class="k">until</span> all is cleared<span class="o">)</span>
</code></pre></div>
<p>If not: try to find a replacement module that does something simular, but in any case you may end having to remove before proceding. Give us a ping/slack/google group/open a github ISSUE if you find yourself uncertain about this. </p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"composer remove drupal/the_module_name --no-update"</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">" drush pm-uninstall the_module_name"</span>
</code></pre></div>
<h3 id="step-4_1">Step 4:</h3>
<p>We will now ask Drupal to update some internal configs and databases. They will bring you up to date with 1.0.0 settings and D9 particularities.</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s1">'scripts/archipelago/setup.sh'</span>
docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s2">"drush updatedb"</span>
</code></pre></div>
<h3 id="step-5_1">Step 5:</h3>
<p>Now you can Sync your new Archipelago 1.0.0 and bring all the new configs and settings in. For this you have <strong>two</strong> options (no worries, remember you made a backup!):</p>
<h4 id="a-partial-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-not-remove-ones-that-only-exist-in-your-custom-setup-eg-new-webforms-or-view-modes">A Partial Sync, which will bring new configs and update existing ones but will <strong>not</strong> remove ones that only exist in your custom setup, e.g. new Webforms or View Modes.</h4>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> esmero-php drush cim -y --partial
</code></pre></div>
<h4 id="a-complete-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-also-remove-all-the-ones-that-are-not-part-of-rc3-its-a-like-clean-factory-reset">A Complete Sync, which will bring new configs and update existing ones but will also remove all the ones that are not part of RC3. It's a like clean factory reset.</h4>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> esmero-php drush cim -y
</code></pre></div>
<p>If all goes well here and you see no errors it's time to reindex <code>Solr</code> because there are new Fields. Run the following:</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> esmero-php drush search-api-reindex
docker <span class="nb">exec</span> esmero-php drush search-api-index
</code></pre></div>
<p>You might see some warnings related to modules dealing with previously non-existent data—no worries, just ignore those.</p>
<p>If you made it this far you are done with code/devops (are we ever ready?), and that means you should be able to (hopefully) stay in the Drupal 9 realm for a few years!</p>
<h3 id="step-7-update-or-not-your-metadata-display-entities-and-menu-items">Step 7: Update (or not) your Metadata Display Entities and Menu items.</h3>
<p>Recommended: If you want to add new templates and menu items 1.0.0 provides, go to your base Github repo folder, replace in the following commands <code>your.domain.org</code> with the actual domain of your Server and run those individually:</p>
<div class="highlight"><pre><span></span><code>sed -i <span class="s1">'s/http:\/\/esmero-web/https:\/\/your.domain.org/g'</span> drupal/scripts/archipelago/deploy.sh
</code></pre></div>
<div class="highlight"><pre><span></span><code>sed -i <span class="s1">'s/http:\/\/esmero-web/https:\/\/your.domain.org/g'</span> drupal/scripts/archipelago/update_deployed.sh
</code></pre></div>
<p>Now update your Metadata Display Templates and Blocks</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s1">'scripts/archipelago/deploy.sh'</span>
</code></pre></div>
<p>Once that is done, you can choose to update all Metadata Displays (Twig templates) we ship with new 1.0.0 versions (heavily fixed IIIF manifest, Markdown to HTML for Metadata, better Object descriptions). But before you do this, we <strong>really</strong> recommend that you first make sure to manually (copy/paste) backup any Twig templates you have modified. If unusure, do not run the command that comes after this warning! You can always manually copy the new templates from the <code>d8content/metadatadisplays</code> folder which contains text versions (again, copy/paste) of each shipped template you can pick and use when you feel ready.</p>
<p>If you are sure (like really?) you want to overwrite the ones you modified (sure, just checking?), then you can run this:</p>
<div class="highlight"><pre><span></span><code>docker <span class="nb">exec</span> -ti esmero-php bash -c <span class="s1">'scripts/archipelago/update_deployed.sh'</span>
</code></pre></div>
<p>Done! (For realz now)</p>
<p>Please log into your Archipelago and test/check all is working! Enjoy 1.0.0. Thanks!</p>
<hr/>
<p>Thank you for reading! Please contact us on our <a href="https://groups.google.com/forum/#!forum/archipelago-commons">Archipelago Commons Google Group</a> with any questions or feedback, or open an ISSUE in this <a href="https://github.com/esmero/archipelago-deployment-live/">Archipelago Deployment Live Repository</a>.</p>
<p>Return to <a href="../archipelago-deployment-live-readme/">Archipelago Live Deployment</a>.</p>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 11, 2022</span>
<br/>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 24, 2022</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)" class="md-footer__link md-footer__link--prev" href="../archipelago-deployment-live-upgradeFromD8ToD9/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)
            </div>
</div>
</a>
<a aria-label="Next: Updating Docker Containers" class="md-footer__link md-footer__link--next" href="../archipelago-deployment-live-updatingContainers/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Updating Docker Containers
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/esmero" rel="noopener" target="_blank" title="Archipelago Commons + esmero">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="https://groups.google.com/g/archipelago-commons" rel="noopener" target="_blank" title="Archipelago Commons Google Group">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15 4v7H5.17L4 12.17V4h11m1-2H3a1 1 0 0 0-1 1v14l4-4h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m5 4h-2v9H6v2a1 1 0 0 0 1 1h11l4 4V7a1 1 0 0 0-1-1Z"></path></svg>
</a>
<a class="md-social__link" href="https://archipelagocommons.slack.com" rel="noopener" target="_blank" title="Archipelago Commons Slack Channel">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.top", "navigation.sections", "navigation.indexes", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "default", "provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>